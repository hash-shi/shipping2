(self.webpackChunk=self.webpackChunk||[]).push([[108],{7108:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>c});var r,a=i(7757),n=i.n(a),s=i(9669),o=i.n(s);i(2443),i(1866);function u(e,t,i,r,a,n,s){try{var o=e[n](s),u=o.value}catch(e){return void i(e)}o.done?t(u):Promise.resolve(u).then(r,a)}document.title="QRラベル印刷";var l,p;const m={mounted:(l=n().mark((function e(){var t=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o().get("/api/qrPrintInit").then((function(e){date.value=e.data.date,t.numSheet=e.data.numSheet,r=e.data.officeCode,t.serialNumber=e.data.serialNumber,t.screenRedrawInterval=e.data.screenRedrawInterval,t.screenRedraw()}));case 1:case"end":return e.stop()}}),e)})),p=function(){var e=this,t=arguments;return new Promise((function(i,r){var a=l.apply(e,t);function n(e){u(a,i,r,n,s,"next",e)}function s(e){u(a,i,r,n,s,"throw",e)}n(void 0)}))},function(){return p.apply(this,arguments)}),data:function(){return{showSupplierSearchDialog:!1,showItemSearchDialog:!1,showItemSearchDialogIndex:-1,supplierCode:"",supplierName:"",serialNumber:"",itemCode:"",itemName:"",itemList:[],qtyPerCtn:"",orgQtyPerCtn:"",pattern:"",numSheet:"",startNum:1,screenRedrawInterval:"",intervalSeach:null}},methods:{qrPrint:function(){var e=this;this.numSheet<=0||this.numSheet>999?alert("枚数は1~999の間の数値を入れてください"):this.startNum<=0||this.startNum>12?alert("枚数は1~12の間の数値を入れてください"):o().get("api/resetSession/",{}).then((function(t){window.open("/qrPrint/"+e.supplierCode+"/"+date.value+"/"+e.itemCode+"/"+e.qtyPerCtn+"/"+e.numSheet+"/"+e.pattern+"/"+e.startNum,"印刷ページ")}))},itemCodeInput:function(){var e=this;if(console.log(this.itemCode),""==this.itemCode||null==this.itemCode)return this.itemName="",this.qtyPerCtn="",void(this.pattern="");this.itemCode=this.changeHarf(this.itemCode),this.supplierCode.substr(0,3)==r?this.pattern="A":this.pattern="C",o().get("api/getQtyPerCtn/"+this.itemCode,{}).then((function(t){e.qtyPerCtn=e.orgQtyPerCtn=t.data.qtyPreCtn,e.itemName=t.data.itemName,null!=e.itemName&&""!=e.itemName||(e.pattern="")}))},qtyPerCtnChange:function(){this.qtyPerCtn=this.changeNumber(this.qtyPerCtn),this.qtyPerCtn!=this.orgQtyPerCtn?this.supplierCode.substr(0,3)==r?this.pattern="B":this.pattern="D":this.pattern="A"},opneSupplierSearchDialog:function(){this.showSupplierSearchDialog=!0},closeSupplierSearchDialog:function(){this.showSupplierSearchDialog=!1},opneItemSearchDialog:function(){this.showItemSearchDialog=!0},closeItemSearchDialog:function(){this.showItemSearchDialog=!1},selectSupplierDialog:function(e){this.supplierCode=e,this.closeSupplierSearchDialog(),this.changeSupplier()},selectItemDialog:function(e){this.itemCode=e.CODE,this.closeItemSearchDialog(),this.itemCodeInput()},changeSupplier:function(e){var t=this;this.supplierCode=this.changeNumber(this.supplierCode),o().get("api/getSupplierData/"+this.supplierCode,{}).then((function(e){t.supplierName=e.data.supplierName,t.itemList=e.data.itemList}))},serialNumberChange:function(){var e=this;o().get("api/serialNumberChange/"+date.value,{}).then((function(t){e.serialNumber=t.data.serialNumber}))},changeNumber:function(e){return e?e=(e=e.replace(/[０-９]/g,(function(e){return String.fromCharCode(e.charCodeAt(0)-65248)}))).replace(/\D/g,"",""):""},changeHarf:function(e){return(e=(e=(e=(e=(e=(e=(e=e.replace("あ","A")).replace("い","I")).replace("う","U")).replace("え","E")).replace("お","O")).replace(/[Ａ-Ｚａ-ｚ０-９]/g,(function(e){return String.fromCharCode(e.charCodeAt(0)-65248)}))).replace(/[^ア-ﾟ!-~]/g,"")).toUpperCase()},screenRedraw:function(){this.intervalSeach=setInterval(function(){this.serialNumberChange()}.bind(this),1e3*this.screenRedrawInterval)}},watch:{supplierName:function(e){this.itemCode="",this.itemName="",this.qtyPerCtn="",this.pattern=""}}};const c=(0,i(1900).Z)(m,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("html",[e._m(0),e._v(" "),i("body",[""!=this.supplierCode&&""!=e.supplierName&&null!=e.itemCode&&""!=this.itemName&&""!=e.qtyPerCtn&&""!=e.pattern&&""!=e.numSheet?i("input",{attrs:{type:"button",value:"ラベル印刷",id:"printButton"},on:{click:e.qrPrint}}):i("input",{attrs:{type:"button",value:"ラベル印刷",disabled:""}}),e._v(" "),i("pre"),e._v(" "),i("table",[i("tr",[i("td",[e._v("仕入先")]),e._v(" "),i("td",[e._v("："),i("input",{directives:[{name:"model",rawName:"v-model",value:e.supplierCode,expression:"supplierCode"}],attrs:{type:"text",size:"6",name:"",value:"",list:"suppliers"},domProps:{value:e.supplierCode},on:{blur:function(t){return e.changeSupplier()},input:function(t){t.target.composing||(e.supplierCode=t.target.value)}}}),e._v(" "),i("font-awesome-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"search"},on:{click:e.opneSupplierSearchDialog}})],1),e._v(" "),i("td",[e._v(e._s(e.supplierName))])]),e._v(" "),i("tr",[i("td",[e._v("年月日")]),e._v(" "),i("td",[e._v("："),i("input",{attrs:{type:"date",name:"",value:"2021-03-09",id:"date",max:"9999-12-31"},on:{blur:e.serialNumberChange}})]),e._v(" "),i("td",[e._v("連番："+e._s(e.serialNumber))])]),e._v(" "),i("tr",[i("td",[e._v("商品　")]),e._v(" "),i("td",[e._v("："),i("input",{directives:[{name:"model",rawName:"v-model",value:e.itemCode,expression:"itemCode"}],attrs:{type:"text",size:"16",name:"",value:"",list:"items",id:"item",disabled:""==this.supplierName||null==this.supplierName},domProps:{value:e.itemCode},on:{blur:e.itemCodeInput,input:function(t){t.target.composing||(e.itemCode=t.target.value)}}}),e._v(" "),i("font-awesome-icon",{staticStyle:{cursor:"pointer"},attrs:{icon:"search"},on:{click:function(t){return e.opneItemSearchDialog()}}}),e._v(" "),i("datalist",{attrs:{id:"items"}},e._l(e.itemList,(function(t){return i("option",[e._v(e._s(t.itemCode))])})),0)],1),e._v(" "),i("td",[e._v(e._s(e.itemName))])]),e._v(" "),i("tr",[i("td",[e._v("入数　")]),e._v(" "),i("td",[e._v("："),i("input",{directives:[{name:"model",rawName:"v-model",value:e.qtyPerCtn,expression:"qtyPerCtn"}],attrs:{type:"text",size:"5",name:"",value:"",id:"qtyPerCtn",disabled:""==this.supplierName||null==this.supplierName},domProps:{value:e.qtyPerCtn},on:{blur:e.qtyPerCtnChange,input:function(t){t.target.composing||(e.qtyPerCtn=t.target.value)}}})]),e._v(" "),i("td",[e._v("形態："+e._s(e.pattern))])]),e._v(" "),i("tr",[i("td",[e._v("枚数　")]),e._v(" "),i("td",[e._v("："),i("input",{directives:[{name:"model",rawName:"v-model",value:e.numSheet,expression:"numSheet"}],attrs:{type:"text",size:"5",name:"",id:"numSheet",maxLength:"3"},domProps:{value:e.numSheet},on:{blur:function(t){e.numSheet=e.changeNumber(e.numSheet)},input:function(t){t.target.composing||(e.numSheet=t.target.value)}}})])]),e._v(" "),i("tr",[i("td",[e._v("開始位置")]),e._v(" "),i("td",[e._v("："),i("input",{directives:[{name:"model",rawName:"v-model",value:e.startNum,expression:"startNum"}],attrs:{type:"text",size:"5",name:"",id:"startNum",maxLength:"2"},domProps:{value:e.startNum},on:{blur:function(t){e.startNum=e.changeNumber(e.startNum)},input:function(t){t.target.composing||(e.startNum=t.target.value)}}})])]),e._v(" "),e.showSupplierSearchDialog?i("SupplierSearchDialog",{on:{close:e.closeSupplierSearchDialog,select:e.selectSupplierDialog}}):e._e(),e._v(" "),e.showItemSearchDialog?i("ItemSearchDialog",{on:{close:e.closeItemSearchDialog,select:e.selectItemDialog}}):e._e()],1)])])}),[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("head",[i("title",[e._v("QRコードラベル印刷")]),e._v(" "),i("meta",{attrs:{charset:"utf-8"}})])}],!1,null,"4d615e20",null).exports}}]);